{{- $osid := .chezmoi.os -}}
{{- if (and (eq .chezmoi.os "linux") (hasKey .chezmoi.osRelease "id")) -}}
  {{- $osid = printf "%s-%s" .chezmoi.os .chezmoi.osRelease.id -}}
{{- end -}}

{{- $condaOS := .chezmoi.os -}}
{{- if eq $condaOS "darwin" }}
  {{- $condaOS = "osx" -}}
{{- end -}}

{{ $condaArch := .chezmoi.arch }}
{{- if (and (eq $condaOS "linux") (eq $condaArch "arm64")) -}}
  {{- $condaArch = "aarch64" -}}
{{- else if (eq $condaArch "amd64") -}}
  {{- $condaArch = "64" -}}
{{- end -}}

encryption: "age"
age:
  passphrase: true

data:
  osid: {{ $osid | quote }}
  appdir:  "{{ .chezmoi.homeDir }}/.local/share"
  brew:
    path: "{{ .chezmoi.homeDir }}/.local/opt/brew" 
    file: "{{ .chezmoi.homeDir }}/.config/{{ $osid }}.Brewfile"
  macos:
    iterm:
      theme:
        dark: "Smoooooth"
        light: "Smoooooth"
  conda:
    subdir: {{ printf "%s-%s" $condaOS $condaArch | quote }}
    clean: {{ promptBool "Clear current conda installation" false }}
    path: "{{ .chezmoi.homeDir }}/.local/opt/conda"

diff:
  exclude: 
    - "scripts"

